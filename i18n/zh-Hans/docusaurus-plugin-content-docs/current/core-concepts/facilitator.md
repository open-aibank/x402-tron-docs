# 促进者

促进者是一个可选但推荐的服务，它简化了在 TRON 区块链上客户端（买家）和服务器（卖家）之间验证和结算支付的过程。

## 什么是促进者？

促进者是一个服务，它：

- 验证客户端提交的支付负载（TIP-712 签名）
- 代表服务器在 TRON 区块链上结算支付
- 使用 transferFrom 机制管理代币转账

通过使用促进者，服务器无需维护直接的 TRON 区块链连接或自行实现支付验证逻辑。

## 促进者职责

- **验证支付**：确认客户端的 TIP-712 签名支付负载符合服务器声明的支付要求
- **结算支付**：将验证的支付提交到 TRON 区块链并监控确认
- **费用管理**：可选择性地收取促进支付的费用
- **提供响应**：将验证和结算结果返回给服务器

促进者不持有资金或充当托管人。

## 为什么使用促进者？

使用促进者提供：

- **降低运营复杂性**：服务器无需直接与 TRON 节点交互
- **协议一致性**：跨服务的标准化验证和结算流程
- **更快的集成**：服务可以以最少的 TRON 特定开发开始接受支付
- **能量/带宽管理**：促进者处理交易执行的 TRX 成本

## 运行您自己的促进者

x402-tron 在演示仓库中包含一个即用型促进者实现。

### 促进者端点

- **GET /** - 服务信息
- **GET /supported** - 支持的功能
- **POST /fee/quote** - 获取支付的费用报价
- **POST /verify** - 验证支付负载
- **POST /settle** - 在链上结算支付

## 交互流程

1. 客户端向资源服务器发起 HTTP 请求
2. 资源服务器响应 402 Payment Required 状态
3. 客户端根据要求创建 TIP-712 签名的支付负载
4. 客户端使用 PAYMENT-SIGNATURE 头发送 HTTP 请求
5. 资源服务器通过 /verify 端点验证支付负载
6. 促进者服务器验证 TIP-712 签名
7. 资源服务器执行工作以完成请求
8. 资源服务器通过 /settle 端点结算支付
9. 促进者服务器在 TRON 区块链上执行 transferFrom
10. 促进者服务器返回带有交易哈希的结算响应
11. 资源服务器返回 200 OK 响应及内容

## 费用结构

促进者可以为其服务收取费用：

- **基础费用**：每笔交易的固定费用
- **百分比费用**：交易金额的百分比
- **无费用**：一些促进者无费用运营

## 信任模型

x402-tron 协议旨在最小化信任：

- **客户端签署授权**：促进者只能转移授权金额
- **支付直接给卖家**：资金从客户端转移到卖家
- **链上验证**：所有交易都可在 TRON 区块链上验证

恶意促进者不能：

- 转移超过客户端授权的金额
- 转移到指定以外的接收者
- 修改签名的支付条款

## 总结

促进者在 TRON 区块链上的 x402-tron 协议中充当独立的验证和结算层。

# 常见问题

## 常规问题

### 用一句话说明什么是 x402-tron？

x402-tron 是 x402 开放支付协议在 TRON 区块链上的实现，它将休眠的 HTTP 402 Payment Required 状态码转变为一个功能齐全的链上支付层，用于 API、网站和 TRON 区块链上的自主代理。

### x402-tron 是商业产品吗？

不是。x402-tron 是 x402 协议在 TRON 区块链上的开源实现，根据 MIT 许可证发布。您无需任何商业产品即可使用它。

### 为什么不使用传统支付渠道或 API 密钥？

传统渠道需要信用卡网络、用户账户和多步骤 UI 流程。x402-tron 消除了这些依赖，实现程序化、HTTP 原生支付（非常适合 AI 代理），同时利用 TRON 的快速和低成本交易。

### x402-tron 仅适用于加密原生项目吗？

不是。任何 Web API 或内容提供商——加密或 web2——如果想要使用 TRON 区块链实现低成本、无摩擦的支付路径，都可以集成 x402-tron。

## 语言和框架支持

### 支持哪些语言和框架？

x402-tron 提供以下 SDK：

- **Python**：支持 FastAPI 和 Flask 集成
- **TypeScript**：支持 fetch 客户端

两种语言都支持客户端、服务器和促进者实现。

## 促进者

### 谁运行促进者？

您运行自己的促进者。x402-tron 设计为自托管。仓库中包含的促进者已准备好运行。

### 什么能阻止恶意促进者窃取资金或谎报结算？

每个支付负载都由买家使用 TIP-712 签名，并直接在 TRON 区块链上结算。篡改交易的促进者将无法通过签名检查。

## 定价和方案

### 我应该如何为端点定价？

常见模式包括：

- 固定每次调用费用（例如，每次请求 1 USDT）
- 分层定价（/basic 与 /pro 端点具有不同价格）
- Upto 方案：支付最多一个最大值，最终成本等于使用量

### x402-tron 支持哪些支付方案？

目前 x402-tron 支持 upto 方案。

## 资产、网络和费用

### 支持哪些资产和网络？

| 网络 | 代币 | 状态 |
|------|------|------|
| TRON 主网 (tron:mainnet) | USDT (TRC-20) | 主网 |
| TRON Nile (tron:nile) | USDT (TRC-20) | 测试网 |
| TRON Shasta (tron:shasta) | USDT (TRC-20) | 测试网 |

可以通过 TokenRegistry 添加自定义 TRC-20 代币。

### 费用是多少？

- **TRON 网络费用**：能量/带宽的 TRX（由促进者支付）
- **促进者费用**：每个促进者可配置（可以为零）

## 安全

### 我必须向后端暴露我的私钥吗？

不需要。推荐的模式是：

- 买家（客户端/代理）在其运行时本地签名
- 卖家从不持有买家的密钥；他们只验证签名
- 促进者仅使用自己的密钥进行交易提交

### 退款如何工作？

upto 方案是推送支付——一旦执行就不可逆。退款选项：

- **业务逻辑退款**：卖家向买家发送新的 USDT 转账
- **部分结算**：服务器仅结算实际使用的金额（upto 方案）

## AI 代理的使用

### 代理如何知道要支付什么？

代理遵循与人类相同的流程：

1. 发起请求
2. 解析 PAYMENT-REQUIRED 头
3. 通过 x402-tron 客户端 SDK 签署 TIP-712 支付负载
4. 使用 PAYMENT-SIGNATURE 头重试

### 代理需要钱包吗？

是的。程序化 TRON 钱包让代理能够签署 TIP-712 负载而不暴露种子短语。

## 开发

### 如何在本地运行 x402-tron？

1. 克隆 x402-tron-demo 仓库
2. 安装依赖
3. 使用您的 TRON 私钥配置 .env 文件
4. 启动促进者
5. 启动服务器
6. 运行客户端

### 我应该使用哪个测试网？

推荐使用 TRON Nile 进行测试。它稳定且有良好的水龙头支持。

## 故障排除

### 即使在附加 PAYMENT-SIGNATURE 后，我仍然收到 402 Payment Required。为什么？

- TIP-712 签名无效
- 支付金额少于所需金额
- 促进者的代币授权不足
- 客户端地址的 USDT 余额不足

### 我的测试在 Nile 上有效但在主网上失败——发生了什么变化？

- 确保设置 network: "tron:mainnet" 而不是 "tron:nile"
- 确认您的钱包有主网 USDT
- 确保促进者钱包有 TRX 用于能量成本
- 代币合约地址在不同网络之间不同
